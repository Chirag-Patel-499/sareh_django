<!-- main/templates/admin/base_site.html -->
{% extends "admin/base_site.html" %}
{% load static %}

{% block extrahead %}
    {{ block.super }}
    <!-- Intro.js CSS -->
    <link href="https://cdn.jsdelivr.net/npm/intro.js/minified/introjs.min.css" rel="stylesheet">

    <style>
        /* Increase tour box width */
        .introjs-tooltip {
            max-width: 650px !important;
            width: auto !important;
        }

        /* Optional: clean text alignment */
        .introjs-tooltiptext {
            text-align: left;
        }
    </style>
{% endblock %}

{% block branding %}
    {{ block.super }}
    <!-- Manual trigger button -->
    <button onclick="startAdminTour()" style="position: absolute; top: 10px; right: 20px; z-index: 9999; background: #6366f1; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">
        â“ Help
    </button>
{% endblock %}

{% block footer %}
    {{ block.super }}
    <!-- Intro.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/intro.js/minified/intro.min.js"></script>

    <script>
        function startAdminTour() {
            introJs().setOptions({
                steps: [
                    {
                        intro: "ğŸ‘‹ Welcome, Sareeh! Here's a quick tour of your website admin panel."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/hero/"]'),
                        intro: "âœ¨ This is the Hero section. Edit homepage headlines and images here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/blog/"]'),
                        intro: "ğŸ“ This is where you manage your blog posts."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/portfolioitem/"]'),
                        intro: "ğŸ¨ Manage your Portfolio projects here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/contact/"]'),
                        intro: "ğŸ“¬ View contact form submissions here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/comment/"]'),
                        intro: "ğŸ’¬ Manage blog comments and replies."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/testimonial/"]'),
                        intro: "ğŸŒŸ Edit testimonials shown on your site."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/adsreel/"]'),
                        intro: "ğŸ“¹ Add Instagram Reels or promotional video links here."
                    },
                    {
                        intro: "âœ… That's it! You can always click the â“ button above to replay this tour."
                    }
                ],
                nextLabel: "Next â†’",
                prevLabel: "â† Back",
                skipLabel: "Skip",
                doneLabel: "Finish"
            }).start();
        }

        // Run tour only once per browser using localStorage
        if (!localStorage.getItem('adminTourSeen')) {
            startAdminTour();
            localStorage.setItem('adminTourSeen', 'true');
        }
    </script>
{% endblock %}
