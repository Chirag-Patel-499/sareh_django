<!-- main/templates/admin/base_site.html -->
{% extends "admin/base_site.html" %}
{% load static %}

{% block extrahead %}
    {{ block.super }}
    <!-- Intro.js CSS -->
    <link href="https://cdn.jsdelivr.net/npm/intro.js/minified/introjs.min.css" rel="stylesheet">

    <style>
        /* Tooltip box ni size moti kari */
        .introjs-tooltip {
            max-width: 600px !important;
            width: auto !important;
            padding: 20px !important;
        }

        /* Text formatting */
        .introjs-tooltiptext {
            text-align: left;
            word-wrap: break-word;
        }

        /* Button area spacing */
        .introjs-tooltipbuttons {
            margin-top: 20px !important;
        }

        /* Mobile responsive fix */
        @media (max-width: 640px) {
            .introjs-tooltip {
                max-width: 90vw !important;
            }
        }
    </style>
{% endblock %}

{% block nav-global %}
  {{ block.super }}
  <li>
    <a href="#" onclick="startAdminTour()" style="padding: 8px; color: #007bff;">ğŸš€ Help Tour</a>
  </li>
{% endblock %}

{% block footer %}
    {{ block.super }}
    <!-- Intro.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/intro.js/minified/intro.min.js"></script>

    <script>
        function startAdminTour() {
            introJs().setOptions({
                steps: [
                    {
                        intro: "ğŸ‘‹ Welcome, Sareeh! Here's a quick tour of your website admin panel."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/hero/"]'),
                        intro: "âœ¨ This is the Hero section. Edit homepage headlines and images here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/blog/"]'),
                        intro: "ğŸ“ This is where you manage your blog posts."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/portfolioitem/"]'),
                        intro: "ğŸ¨ Manage your Portfolio projects here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/contact/"]'),
                        intro: "ğŸ“¬ View contact form submissions here."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/comment/"]'),
                        intro: "ğŸ’¬ Manage blog comments and replies."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/testimonial/"]'),
                        intro: "ğŸŒŸ Edit testimonials shown on your site."
                    },
                    {
                        element: document.querySelector('[href*="/admin/main/adsreel/"]'),
                        intro: "ğŸ“¹ Add Instagram Reels or promotional video links here."
                    },
                    {
                        intro: "âœ… That's it! You can always click the ğŸš€ Help Tour button above to replay this tour."
                    }
                ],
                nextLabel: "Next â†’",
                prevLabel: "â† Back",
                skipLabel: "Skip",
                doneLabel: "Finish"
            }).start();
        }

        // Run tour only once per browser using localStorage
        if (!localStorage.getItem('adminTourSeen')) {
            startAdminTour();
            localStorage.setItem('adminTourSeen', 'true');
        }
    </script>
{% endblock %}
